{% extends 'base.html' %}

{% block head %}

<title>Task Master</title>

{% endblock %}

{% block body %}

<div class='content'>
    <nav class="navbar navbar-light">
        <a class="navbar-brand" href="/">NoteScan</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        
    </nav>
    <!-- <h1 style='text-align: center;'>Upload image</h1> -->
    <form actions='/upload-image' method='POST' enctype='multipart/form-data'>
        <div class='form-group'>
            <label>Select image</label>
            <div class='custom-file'>
                <input type='file' class='custom-file-input' name='image' id='image'>
            </div>
        </div>
        <button type='submit' class='btn btn-primary'>Upload image</button>
    </form>

    <form actions='/notes-txt' method='POST' enctype='multipart/form-data'>
        <textarea style='width: 300px; height: 200px;' id='testing' name='testing' readonly></textarea>
    </form>
    
    <button onclick='change_text()'>
        hihihi
    </button>    
    <button onclick='post_text()'>
        posting
    </button>

</div>

<script>

    function post_text() {
        var url = 'http://localhost:5000/test';
        var text = document.getElementById('testing').value

        fetch(url, {
            method: "post",
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },

            //make sure to serialize your JSON body
            body: JSON.stringify({
                title: 'hello',
                notes: text
            })
        })
        // .then( (response) => { 
        //     //do something awesome that makes the world a better place
        // });
    }

    function change_text() {
        var url = 'http://localhost:5000/home';
        fetch(url).then(function (response) {
           return response.json(); 
        }).then(function(data) {
            arr = ["Where it began..","Greece, 400 BC", "Credited for coining the term \"atom\"","divided anymore, hello"]
            console.log(arr);

            arrToString = '';
            for (var i = 0; i< arr.length; i++){
                arrToString += arr[i] + '\n';
            }

            var x = document.getElementById('testing');
            x.readOnly = false;

            if (x.innerHTML === '') {
                // Section
                // var answer = y.replace(new RegExp('\n', 'g'), '<br>');
                x.innerHTML = arrToString;
            } else {
                x.innerHTML = '';
            }

        });
        
    }


</script>

{% endblock %}